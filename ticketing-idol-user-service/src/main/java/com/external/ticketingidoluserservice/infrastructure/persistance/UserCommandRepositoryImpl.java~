package com.external.ticketingidoluserservice.infrastructure.persistance;

import com.external.ticketingidoluserservice.domain.model.User;
import com.external.ticketingidoluserservice.domain.repository.UserCommandRepository;
import org.hibernate.reactive.mutiny.Mutiny;

import java.util.Optional;
import java.util.UUID;
import java.util.concurrent.CompletionStage;

public class UserCommandRepositoryImpl implements UserCommandRepository {
    private final Mutiny.SessionFactory sessionFactory = HibernateReactiveUtil.getSessionFactory();

    @Override
    public CompletionStage<Void> save(User user) {
        return sessionFactory
                .withTransaction((session, tx) -> session.persist(user))
                .subscribeAsCompletionStage();
    }
}
